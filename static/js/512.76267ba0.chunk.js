(()=>{"use strict";var e={512:(e,t,r)=>{var a=r(685);let o=null,n=null;function s(e,t){let r=0,a=0,o=0;for(let n=0;n<e.length;n++)r+=e[n]*t[n],a+=e[n]**2,o+=t[n]**2;return r/(Math.sqrt(a)*Math.sqrt(o))}self.onmessage=async e=>{const{type:t,payload:r}=e.data;if("loadModel"===t&&(o=await(0,a.TkF)("text2text-generation","Xenova/LaMini-Flan-T5-783M",{dtype:"q8"}),self.postMessage({type:"modelLoaded"})),"loadEmbedder"===t&&(n=await(0,a.TkF)("feature-extraction","Xenova/all-MiniLM-L6-v2",{dtype:"q8"}),self.postMessage({type:"embedderLoaded"})),"generation"===t){if(!n)return void self.postMessage({type:"error",payload:"Embedder not loaded yet."});if(!o)return void self.postMessage({type:"error",payload:"Model not loaded yet."});const e=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200;const r=e.split(" ");let a=[];for(let o=0;o<r.length;o+=t)a.push(r.slice(o,o+t).join(" "));return a}(r.context),t=(await n(e,{pooling:"mean",normalize:!0})).tolist(),a=(await n(r.input,{pooling:"mean",normalize:!0})).tolist(),i=e.map(((e,r)=>({chunk:e,similarity:s(a[0],t[r])}))).sort(((e,t)=>t.similarity-e.similarity)).slice(0,3),l=i.map((e=>e.chunk)),p=await o("Answer the question based on this context:"+JSON.stringify(l,null,2)+". "+r.input,{min_new_tokens:50,max_new_tokens:500});self.postMessage({type:"inference",payload:[p[0].generated_text,i]})}}}},t={};function r(a){var o=t[a];if(void 0!==o)return o.exports;var n=t[a]={exports:{}};return e[a](n,n.exports,r),n.exports}r.m=e,r.x=()=>{var e=r.O(void 0,[685],(()=>r(512)));return e=r.O(e)},(()=>{var e=[];r.O=(t,a,o,n)=>{if(!a){var s=1/0;for(d=0;d<e.length;d++){a=e[d][0],o=e[d][1],n=e[d][2];for(var i=!0,l=0;l<a.length;l++)(!1&n||s>=n)&&Object.keys(r.O).every((e=>r.O[e](a[l])))?a.splice(l--,1):(i=!1,n<s&&(s=n));if(i){e.splice(d--,1);var p=o();void 0!==p&&(t=p)}}return t}n=n||0;for(var d=e.length;d>0&&e[d-1][2]>n;d--)e[d]=e[d-1];e[d]=[a,o,n]}})(),r.d=(e,t)=>{for(var a in t)r.o(t,a)&&!r.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},r.f={},r.e=e=>Promise.all(Object.keys(r.f).reduce(((t,a)=>(r.f[a](e,t),t)),[])),r.u=e=>"static/js/"+e+".9bd085b9.chunk.js",r.miniCssF=e=>{},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.p="/transformers/",(()=>{var e={512:1};r.f.i=(t,a)=>{e[t]||importScripts(r.p+r.u(t))};var t=self.webpackChunkmy_app=self.webpackChunkmy_app||[],a=t.push.bind(t);t.push=t=>{var o=t[0],n=t[1],s=t[2];for(var i in n)r.o(n,i)&&(r.m[i]=n[i]);for(s&&s(r);o.length;)e[o.pop()]=1;a(t)}})(),(()=>{var e=r.x;r.x=()=>r.e(685).then(e)})();r.x()})();
//# sourceMappingURL=512.76267ba0.chunk.js.map